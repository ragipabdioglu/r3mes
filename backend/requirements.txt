# R3MES Backend Inference Service Dependencies

# FastAPI and server
fastapi==0.104.1
uvicorn[standard]==0.24.0
pydantic==2.5.0
pydantic-settings>=2.0.0  # Pydantic settings management
python-multipart>=0.0.6  # Form data parsing
websockets>=12.0  # WebSocket support
starlette>=0.27.0  # ASGI framework (FastAPI dependency)

# AI/ML Libraries
transformers==4.35.0
peft==0.7.0
bitsandbytes==0.41.3
accelerate==0.25.0
torch>=2.1.0

# Database
# sqlite3 - Built-in Python module (for SQLite)
aiosqlite>=0.19.0  # Async SQLite
asyncpg>=0.29.0  # Async PostgreSQL (production)
psycopg2-binary>=2.9.9  # PostgreSQL adapter for Alembic migrations
sqlalchemy>=2.0.0  # SQL toolkit
alembic>=1.13.0  # Database migrations

# Utilities
python-dotenv==1.0.0

# Semantic Router
sentence-transformers>=2.2.0
numpy>=1.24.0

# Rate Limiting
slowapi==0.1.9

# Caching
redis[hiredis]>=5.0.0  # Redis with hiredis for better performance

# Monitoring
prometheus-client>=0.19.0  # Prometheus metrics exporter
sentry-sdk[fastapi]>=1.38.0  # Sentry error tracking
psutil>=5.9.0  # System metrics collection (CPU, memory)

# Distributed Tracing (optional)
opentelemetry-api>=1.21.0  # OpenTelemetry API
opentelemetry-sdk>=1.21.0  # OpenTelemetry SDK
opentelemetry-instrumentation-fastapi>=0.42b0  # FastAPI instrumentation
opentelemetry-instrumentation-requests>=0.42b0  # Requests instrumentation
opentelemetry-instrumentation-httpx>=0.42b0  # HTTPX instrumentation
opentelemetry-instrumentation-redis>=0.42b0  # Redis instrumentation
opentelemetry-instrumentation-sqlite3>=0.42b0  # SQLite instrumentation
opentelemetry-instrumentation-asyncpg>=0.42b0  # PostgreSQL instrumentation
opentelemetry-exporter-otlp-proto-grpc>=1.21.0  # OTLP gRPC exporter
opentelemetry-exporter-jaeger-thrift>=1.21.0  # Jaeger exporter

# Blockchain Query
grpcio>=1.60.0  # gRPC client (optional, for future gRPC support)
requests>=2.31.0  # HTTP client for REST API fallback
httpx>=0.25.0  # Async HTTP client
aiohttp>=3.9.0  # Async HTTP client (alternative)

# Security
python-jose[cryptography]>=3.3.0  # JWT handling
passlib[bcrypt]>=1.7.4  # Password hashing
cryptography>=41.0.0  # Cryptographic operations

# Async utilities
anyio>=3.7.1,<4.0.0  # Async compatibility layer (FastAPI 0.104.1 requires <4.0.0)
asyncio-throttle>=1.0.0  # Async rate limiting

# JSON handling
orjson>=3.9.0  # Fast JSON serialization
ujson>=5.8.0  # Ultra fast JSON

# Secret Management
google-cloud-secret-manager>=2.18.0  # Google Cloud Secret Manager
boto3>=1.28.0  # AWS Secrets Manager
hvac>=1.2.0  # HashiCorp Vault

