# R3MES Testnet Environment Variables
# Copy this file to .env.production and fill in the actual values
# DO NOT commit .env.production to git!

# ============================================
# Database Configuration
# ============================================
POSTGRES_USER=r3mes
# POSTGRES_PASSWORD is managed via Docker Secrets (docker/secrets/postgres_password.txt)
# Create secrets using: bash scripts/create_secrets.sh
POSTGRES_DB=r3mes
POSTGRES_PORT=5432

# ============================================
# Redis Configuration
# ============================================
# REDIS_PASSWORD is managed via Docker Secrets (docker/secrets/redis_password.txt)
# Create secrets using: bash scripts/create_secrets.sh
REDIS_PORT=6379

# ============================================
# Network Type Configuration
# ============================================
# Set network type: testnet or mainnet
# IMPORTANT: This file is for TESTNET deployment
# For mainnet, use env.production.example instead
R3MES_NETWORK=testnet

# ============================================
# Blockchain Configuration
# ============================================
# These will be set automatically by docker-compose.prod.yml using service names
# BLOCKCHAIN_RPC_URL=http://remesd:26657
# BLOCKCHAIN_GRPC_URL=remesd:9090

# TESTNET Chain ID - Update with your testnet chain ID
CHAIN_ID=remes-testnet-1

# ============================================
# IPFS Configuration
# ============================================
# This will be set automatically by docker-compose.prod.yml using service name
# R3MES_IPFS_URL=http://ipfs:5001

# ============================================
# Backend Configuration
# ============================================
R3MES_ENV=production
LOG_LEVEL=INFO
ENABLE_FILE_LOGGING=true

# CORS Configuration - TESTNET domains
# Update these with your testnet domain(s)
CORS_ALLOWED_ORIGINS=https://testnet.r3mes.network,https://testnet-www.r3mes.network
CORS_ALLOW_ALL=false

# Rate Limiting (testnet may have different limits)
BACKEND_RATE_LIMIT_CHAT=10/minute
BACKEND_RATE_LIMIT_GET=30/minute

# Backend Timeouts
BACKEND_SHUTDOWN_TIMEOUT=30.0
BACKEND_HTTP_CLIENT_TIMEOUT=30.0
BACKEND_METRICS_INTERVAL=10.0
BACKEND_HEALTH_CHECK_TIMEOUT=10.0
BACKEND_BLOCKCHAIN_QUERY_TIMEOUT=10
BACKEND_BLOCKCHAIN_RPC_TIMEOUT=10
BACKEND_DATABASE_TIMEOUT=2
BACKEND_IPFS_DOWNLOAD_TIMEOUT=3600

# Backend Retry Configuration
BACKEND_RETRY_MAX_RETRIES=3
BACKEND_RETRY_INITIAL_DELAY=1.0
BACKEND_RETRY_MAX_DELAY=60.0
BACKEND_RETRY_BACKOFF_FACTOR=2.0
BACKEND_BLOCKCHAIN_RETRY_MAX_RETRIES=3
BACKEND_BLOCKCHAIN_RETRY_MAX_DELAY=30.0
BACKEND_IPFS_RETRY_MAX_RETRIES=5
BACKEND_IPFS_RETRY_INITIAL_DELAY=0.5
BACKEND_IPFS_RETRY_MAX_DELAY=10.0
BACKEND_IPFS_RETRY_BACKOFF_FACTOR=1.5

# Backend Cache TTL
BACKEND_BLOCK_CACHE_TTL=300
BACKEND_RECENT_BLOCKS_CACHE_TTL=30
BACKEND_BLOCK_HEIGHT_CACHE_TTL=10

# Backend Indexer Limits
BACKEND_INDEXER_MINERS_LIMIT=1000
BACKEND_INDEXER_VALIDATORS_LIMIT=1000

# Backend Logging Configuration
BACKEND_LOG_MAX_BYTES_PRODUCTION=104857600
BACKEND_LOG_BACKUP_COUNT_PRODUCTION=10
BACKEND_LOG_MAX_BYTES_DEVELOPMENT=10485760
BACKEND_LOG_BACKUP_COUNT_DEVELOPMENT=5

# Backend WebSocket Configuration
BACKEND_WS_HEARTBEAT_INTERVAL=30
BACKEND_WS_PONG_TIMEOUT=60
BACKEND_WS_SHUTDOWN_CHECK_INTERVAL=1.0

# Model Configuration
BASE_MODEL_PATH=/app/checkpoints/base_model
MODEL_DOWNLOAD_DIR=/app/models

# Semantic Router Configuration
# USE_SEMANTIC_ROUTER=true  # Enable semantic router (default: true)
# SEMANTIC_ROUTER_THRESHOLD=0.7  # Similarity threshold (0.0-1.0)
# Note: Semantic router uses sentence-transformers which works on CPU
# CUDA is not required for semantic router, only for bitsandbytes (quantization)

# Mining Settings (if applicable)
MINING_DIFFICULTY=1234.0
GPU_MEMORY_LIMIT_MB=
P2P_PORT=9090

# ============================================
# Frontend Configuration - TESTNET URLs
# ============================================
# Update these with your testnet URLs
NEXT_PUBLIC_CHAIN_ID=remes-testnet-1
NEXT_PUBLIC_API_URL=https://testnet.r3mes.network/api
NEXT_PUBLIC_BACKEND_URL=https://testnet.r3mes.network/api
NEXT_PUBLIC_SITE_URL=https://testnet.r3mes.network
NEXT_PUBLIC_RPC_URL=https://testnet-rpc.r3mes.network
NEXT_PUBLIC_REST_URL=https://testnet-api.r3mes.network

# Analytics (optional)
NEXT_PUBLIC_GA_ID=
NEXT_PUBLIC_SENTRY_DSN=

# ============================================
# SSL/HTTPS Configuration - TESTNET domain
# ============================================
# Update with your testnet domain
DOMAIN=testnet.r3mes.network
EMAIL=admin@r3mes.network

# ============================================
# Port Configuration
# ============================================
# Backend API port (default: 8000)
BACKEND_PORT=8000
# Frontend port (default: 3000)
FRONTEND_PORT=3000
# Blockchain ports (defaults: 26656, 26657, 9090, 1317)
BLOCKCHAIN_P2P_PORT=26656
BLOCKCHAIN_RPC_PORT=26657
BLOCKCHAIN_GRPC_PORT=9090
BLOCKCHAIN_REST_PORT=1317
# Nginx ports (defaults: 80, 443)
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
# Miner inference server port (default: 8081)
R3MES_SERVING_NODE_PORT=8081

# ============================================
# Security
# ============================================
# API Keys (generate secure random strings)
# JWT_SECRET=CHANGE_ME_JWT_SECRET
# SESSION_SECRET=CHANGE_ME_SESSION_SECRET

# ============================================
# Monitoring Configuration
# ============================================
# Prometheus, Grafana, and Alertmanager are included in docker-compose.prod.yml
# Grafana admin password is managed via Docker Secrets (docker/secrets/grafana_admin_password.txt)
# Create secrets using: bash scripts/create_secrets.sh

# Optional: External monitoring
# SENTRY_DSN=
# PROMETHEUS_ENABLED=true

# ============================================
# Alertmanager Configuration (Optional)
# ============================================
# Configure alert notifications via Slack, Email, or PagerDuty

# Slack Webhook (for Slack notifications)
# Get webhook URL from: https://api.slack.com/messaging/webhooks
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Email Notifications (for critical alerts)
# ALERT_EMAIL_TO=alerts@your-domain.com
# ALERT_EMAIL_FROM=alerts@your-domain.com
# SMTP_HOST=smtp.gmail.com:587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password

# Gmail App Password Setup:
# 1. Enable 2FA on your Google account
# 2. Go to: https://myaccount.google.com/apppasswords
# 3. Generate app password for "Mail"
# 4. Use the generated password as SMTP_PASSWORD

# Other SMTP Providers:
# - SendGrid: smtp.sendgrid.net:587
# - Mailgun: smtp.mailgun.org:587
# - AWS SES: email-smtp.region.amazonaws.com:587

# PagerDuty (optional, for on-call alerts)
# PAGERDUTY_SERVICE_KEY=your-pagerduty-service-key

# ============================================
# Miner Configuration (if using GPU mining)
# ============================================
# These will be set automatically by docker-compose.prod.yml using service names
# BLOCKCHAIN_URL=remesd:9090
# IPFS_API_URL=http://ipfs:5001

