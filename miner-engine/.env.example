# R3MES Miner Engine - Environment Variables Example
# Copy this file to .env and fill in your values

# =============================================================================
# BLOCKCHAIN CONFIGURATION
# =============================================================================

# Blockchain gRPC endpoint
R3MES_BLOCKCHAIN_URL=localhost:9090

# Chain ID for the blockchain network
R3MES_CHAIN_ID=remes-test

# Private key for signing transactions (64 hex characters)
# Generate with: openssl rand -hex 32
R3MES_PRIVATE_KEY=your_64_character_hex_private_key_here

# =============================================================================
# ENVIRONMENT MODE
# =============================================================================

# Environment mode: development, staging, production
R3MES_ENV=development

# Enable test mode (uses mock data and services)
R3MES_TEST_MODE=true

# =============================================================================
# NODE ROLES
# =============================================================================

# Enable miner node functionality
R3MES_ENABLE_MINER=true

# Enable serving node functionality
R3MES_ENABLE_SERVING_NODE=false

# Enable proposer node functionality
R3MES_ENABLE_PROPOSER_NODE=false

# =============================================================================
# MODEL CONFIGURATION
# =============================================================================

# Use Llama 3 model (requires transformers library)
R3MES_USE_LLAMA3=false

# Use GGUF model format (requires llama-cpp-python)
R3MES_USE_GGUF=false

# Model hidden size
R3MES_MODEL_HIDDEN_SIZE=768

# LoRA rank for adapter training
R3MES_LORA_RANK=8

# LoRA alpha parameter
R3MES_LORA_ALPHA=16.0

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Maximum memory usage in MB
R3MES_MAX_MEMORY_MB=8192

# GPU memory fraction to use (0.0 to 1.0)
R3MES_GPU_MEMORY_FRACTION=0.8

# Training batch size
R3MES_BATCH_SIZE=4

# Gradient accumulation steps
R3MES_GRADIENT_ACCUMULATION_STEPS=4

# Maximum task prefetch limit
R3MES_MAX_PREFETCH=10

# Top-k gradient compression ratio (0.0 to 1.0)
R3MES_TOP_K_COMPRESSION=0.1

# Number of worker processes
R3MES_NUM_WORKERS=4

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# IPFS API endpoint
R3MES_IPFS_URL=http://localhost:5001

# Stats HTTP server port
R3MES_STATS_PORT=8080

# Monitoring dashboard port
R3MES_MONITORING_PORT=8081

# Arrow Flight server port
R3MES_ARROW_FLIGHT_PORT=8082

# Network timeout in seconds
R3MES_TIMEOUT_SECONDS=30

# =============================================================================
# PRIVACY AND SECURITY
# =============================================================================

# Enable Intel SGX for privacy
R3MES_ENABLE_SGX=false

# Path to SGX enclave file
R3MES_SGX_ENCLAVE_PATH=privacy/enclave/r3mes_enclave.signed.so

# SGX debug mode
R3MES_SGX_DEBUG_MODE=true

# Enable gradient encryption
R3MES_ENABLE_GRADIENT_ENCRYPTION=false

# Enable TLS for network communication
R3MES_ENABLE_TLS=false

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Logging level: DEBUG, INFO, WARNING, ERROR
R3MES_LOG_LEVEL=INFO

# Log format: structured, simple
R3MES_LOG_FORMAT=structured

# Log output: console, file, both
R3MES_LOG_OUTPUT=console

# Log file path (when output includes file)
R3MES_LOG_FILE=logs/miner-engine.log

# =============================================================================
# MONITORING AND DEBUGGING
# =============================================================================

# Enable monitoring dashboard
R3MES_ENABLE_DASHBOARD=false

# Dashboard host (0.0.0.0 for all interfaces)
R3MES_DASHBOARD_HOST=127.0.0.1

# Dashboard port
R3MES_DASHBOARD_PORT=8080

# Enable performance monitoring
R3MES_ENABLE_PERFORMANCE_MONITORING=true

# Enable debug endpoints
R3MES_ENABLE_DEBUG_ENDPOINTS=false

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# LoRA adapter cache directory
R3MES_LORA_CACHE_DIR=cache/lora

# Model cache directory
R3MES_MODEL_CACHE_DIR=cache/models

# Maximum cache size in MB
R3MES_MAX_CACHE_SIZE_MB=1024

# Maximum adapters to keep in memory
R3MES_MAX_ADAPTERS_IN_MEMORY=10

# =============================================================================
# ADVANCED TRAINING PARAMETERS
# =============================================================================

# LoRA weight decay
LORA_WEIGHT_DECAY=0.01

# Gradient clipping max norm
LORA_GRAD_CLIP_MAX_NORM=1.0

# Quantization scale for BitNet
LORA_QUANTIZATION_SCALE=127.0

# Learning rate scheduler type
LORA_LR_SCHEDULER=cosine

# Warmup steps for learning rate
LORA_WARMUP_STEPS=100

# =============================================================================
# SERVING NODE CONFIGURATION
# =============================================================================

# Model version for serving
R3MES_SERVING_MODEL_VERSION=v1.0.0

# Maximum concurrent inference requests
R3MES_MAX_CONCURRENT_REQUESTS=10

# Request timeout in seconds
R3MES_REQUEST_TIMEOUT_SECONDS=30

# Enable request batching
R3MES_ENABLE_BATCHING=true

# Maximum batch size for inference
R3MES_MAX_BATCH_SIZE=8

# =============================================================================
# PROPOSER NODE CONFIGURATION
# =============================================================================

# Gradient aggregation interval in seconds
R3MES_AGGREGATION_INTERVAL_SECONDS=60

# Minimum gradients required for aggregation
R3MES_MIN_GRADIENTS_FOR_AGGREGATION=5

# Maximum gradients per aggregation
R3MES_MAX_GRADIENTS_PER_AGGREGATION=100

# =============================================================================
# DEVELOPMENT AND TESTING
# =============================================================================

# Use mock blockchain client (for testing)
R3MES_MOCK_BLOCKCHAIN=false

# Use mock IPFS client (for testing)
R3MES_MOCK_IPFS=false

# Enable hot-reloading of configuration
R3MES_HOT_RELOAD_CONFIG=true

# Seed for deterministic testing
R3MES_RANDOM_SEED=42

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Intel Attestation Service API key (for SGX)
R3MES_IAS_API_KEY=your_intel_attestation_service_key

# Custom IPFS gateway URL
R3MES_IPFS_GATEWAY_URL=https://ipfs.io

# Custom blockchain explorer URL
R3MES_BLOCKCHAIN_EXPLORER_URL=https://explorer.remes.network

# =============================================================================
# RESOURCE LIMITS
# =============================================================================

# Maximum file size for uploads (MB)
R3MES_MAX_FILE_SIZE_MB=100

# Maximum number of concurrent tasks
R3MES_MAX_CONCURRENT_TASKS=50

# Task processing timeout (seconds)
R3MES_TASK_TIMEOUT_SECONDS=300

# Maximum chunk size for processing (bytes)
R3MES_MAX_CHUNK_SIZE=4194304

# =============================================================================
# EXAMPLE VALUES FOR QUICK START
# =============================================================================

# Uncomment and modify these for a quick local setup:

# R3MES_BLOCKCHAIN_URL=localhost:9090
# R3MES_CHAIN_ID=remes-local
# R3MES_PRIVATE_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
# R3MES_ENV=development
# R3MES_TEST_MODE=true
# R3MES_ENABLE_MINER=true
# R3MES_MODEL_HIDDEN_SIZE=256
# R3MES_BATCH_SIZE=2
# R3MES_LOG_LEVEL=DEBUG
# R3MES_ENABLE_DASHBOARD=true