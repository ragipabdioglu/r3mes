syntax = "proto3";
package remes.remes.v1;

import "amino/amino.proto";
import "gogoproto/gogo.proto";

option go_package = "remes/x/remes/types";

// Params defines the parameters for the module.
message Params {
  option (amino.name) = "remes/x/remes/Params";
  option (gogoproto.equal) = true;

  // Challenge period blocks - number of blocks before aggregation can be finalized
  // Default: 100 blocks (~8 minutes at 5s/block)
  int64 challenge_period_blocks = 1;

  // Scalability parameters for adaptive scaling mechanisms
  ScalabilityParams scalability_params = 2 [(gogoproto.nullable) = false];
}

// ScalabilityParams holds configuration for adaptive scaling mechanisms
message ScalabilityParams {
  option (amino.name) = "remes/x/remes/ScalabilityParams";
  option (gogoproto.equal) = true;

  // Thresholds for adaptive scaling
  uint64 max_participants_per_shard = 1;
  uint64 max_gradients_per_block = 2;
  uint64 max_aggregations_per_block = 3;
  uint64 max_pending_gradients = 4;
  uint64 max_pending_aggregations = 5;

  // Adaptive parameters (as strings for decimal precision)
  string compression_ratio_threshold = 6; // Trigger compression adjustment (e.g., "0.9")
  string network_load_threshold = 7; // Trigger load balancing (e.g., "0.8")
  string resource_utilization_threshold = 8; // Trigger resource optimization (e.g., "0.8")

  // Load balancing
  bool enable_load_balancing = 9;
  string load_balancing_strategy = 10; // "round_robin", "weighted", "least_connections"
  uint64 shard_reassignment_interval = 11; // blocks

  // Performance optimization
  bool enable_adaptive_compression = 12;
  bool enable_adaptive_sharding = 13;
  bool enable_resource_optimization = 14;
}
