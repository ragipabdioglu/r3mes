[Unit]
Description=R3MES Database Backup Service
After=network.target postgresql.service
Requires=postgresql.service

[Service]
Type=oneshot
User=r3mes
Group=r3mes
Environment="DATABASE_URL=postgresql://user:password@localhost:5432/r3mes"
Environment="BACKUP_DIR=/var/backups/r3mes"
Environment="S3_BUCKET=r3mes-backups"
Environment="RETENTION_DAYS=7"
ExecStart=/home/rabdi/R3MES/scripts/backup_database.sh
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target

